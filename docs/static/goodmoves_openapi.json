{"openapi":"3.0.2","info":{"title":"goodmoves API","description":"### API Docs\nAs Software-as-a-Service, goodmoves brings the power of actual artificial intelligence to next best actions (NBA) and recommendations. When communicating with a customer, be it through a webshop, an online marketing campaign or a phone call, one faces a difficult challenge: customers should purchase a product, accept an upsell offer, or renew their contract. No matter what situation a customer is in, there is one optimal course of action.\n\n#### Introduction\nWe offer a RESTful API to interact securely with our service. Its URL includes the major version number of the software before specifying the actual endpoint. In case of version 2 and the action endpoint, the URL has the following form: https://api.goodmoves.ai/v3/action/l59sdl42gkj\n\n#### Versioning\nCurrently, our API is available in version 3.1.0. We strive for careful version updates with backwards compatibility. To this end, we will keep previous versions of the API available for a reasonable migration period.\n\n#### Authentication\nThe API client authenticates with a JSON Web Token (JWT). You will receive the client id and client secret once you sign up for our service.\n\n#### Error handling\nIf a problem occurs, the API will respond with a corresponding HTTP status code. In case the operation fails for only a few resource items when used in batch mode, but is successful for the remainders, the response code will be 400. We will return a list telling you which batch items had failed.\n","version":"3.1.0"},"paths":{"/":{"get":{"tags":["info"],"summary":"Root:Info","operationId":"root_info__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetInfoResponse"}}}},"404":{"description":"Not found"}}}},"/version":{"get":{"tags":["info"],"summary":"Root:Version","operationId":"root_version_version_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetVersionResponse"}}}},"404":{"description":"Not found"}}}},"/v3/action/{case_id}":{"post":{"tags":["nba"],"summary":"Request a single NBA","description":"Request and return the next best action with these parameters:\n\n- **query_id** (required, string): The unique ID of this NBA request (to be used for the `/action/select` and `/reward` endpoints as well)\n- **customer_id** (string): The unique ID of your customer\n- **state** (dictionary): A 'state vector' of your customer, used to make the goodmoves AI learn\n- **limit** (int): Limit the number of actions returned\n- **allowed_actions** (list): List of a subset of actions to choose from\n\nReturns:\n\n- NBAs for this customer, a dictionary with items `query_id` (the NBA request ID) and `actions`\n(the NBA actions for that query ID, ordered by desirability).\n","operationId":"nba_action_v3_action__case_id__post","parameters":[{"required":true,"schema":{"title":"Case Id","type":"string"},"name":"case_id","in":"path"},{"required":false,"schema":{"title":"Authorization","type":"string"},"name":"Authorization","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostActionBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostActionResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v3/action/{case_id}/batch":{"post":{"tags":["nba"],"summary":"Request NBAs for multiple customers in batch mode","description":"Request and return the next best action for multiple customers in batch mode with these parameters:\n\n- **customers** (required, list): List of dictionaries with fields `customer_id` (the ID of your customer),\n`query_id` (unique ID of the NBA request), `state` (state vector of your customer)\n- **limit** (int): Limit the number of actions returned\n- **allowed_actions** (list): List of a subset of actions to choose from\n\nReturns:\n- list of NBAs, a dictionary for each request with items `query_id` (the NBA request ID) and `actions`\n(the NBA actions for that query ID, ordered by desirability).\n","operationId":"nba_action_batch_v3_action__case_id__batch_post","parameters":[{"required":true,"schema":{"title":"Case Id","type":"string"},"name":"case_id","in":"path"},{"required":false,"schema":{"title":"Authorization","type":"string"},"name":"Authorization","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostActionBatchBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostActionBatchResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v3/action/{case_id}/select":{"post":{"tags":["nba"],"summary":"Tell goodmoves which action you showed to your customer","description":"Post to goodmoves which action you presented to your customers. Parameters:\n\n- **query_id** (required, string): Unique ID of the NBA request\n- **action** (required, string): Which action your user selected.\n","operationId":"nba_select_action_v3_action__case_id__select_post","parameters":[{"required":true,"schema":{"title":"Case Id","type":"string"},"name":"case_id","in":"path"},{"required":false,"schema":{"title":"Authorization","type":"string"},"name":"Authorization","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostSelectActionBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostSelectActionResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v3/action/{case_id}/select/batch":{"post":{"tags":["nba"],"summary":"Tell goodmoves in batch mode which actions you showed to a set of customer interactions","description":"Post to goodmoves in batch mode which actions you presented to your customers. Parameters:\n\n- **selection** (required, list): List of dictionaries with keys `query_id` (unique ID of the request) and\n`action` (which action was selected for this query ID).\n","operationId":"nba_select_action_batch_v3_action__case_id__select_batch_post","parameters":[{"required":true,"schema":{"title":"Case Id","type":"string"},"name":"case_id","in":"path"},{"required":false,"schema":{"title":"Summary","default":"Tell goodmoves in batch mode which actions you showed to your customers"},"name":"summary","in":"query"},{"required":false,"schema":{"title":"Authorization","type":"string"},"name":"Authorization","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostSelectActionBatchBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostSelectActionBatchResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v3/reward/{case_id}":{"post":{"tags":["nba"],"summary":"Tell goodmoves which reward was received for a single action","description":"Post to goodmoves which reward was received for an action; used for learning and improving its NBAs. Parameters:\n\n- **query_id** (required, string): Unique query ID of the NBA request\n- **reward** (required, float): Reward received by the action\n","operationId":"nba_reward_v3_reward__case_id__post","parameters":[{"required":true,"schema":{"title":"Case Id","type":"string"},"name":"case_id","in":"path"},{"required":false,"schema":{"title":"Authorization","type":"string"},"name":"Authorization","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostRewardBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostRewardResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v3/reward/{case_id}/batch":{"post":{"tags":["nba"],"summary":"Tell goodmoves in batch mode which rewards were received for a set of actions","description":"Post to goodmoves in batch mode which rewards were received for a batch of actions;\nused for learning and improving its NBAs. Parameters:\n\n- **rewards** (required, list): List of dictionaries with keys `query_id` (unique ID of the NBA request) and\n`reward` (float, reward received by the chosen action).\n","operationId":"nba_reward_batch_v3_reward__case_id__batch_post","parameters":[{"required":true,"schema":{"title":"Case Id","type":"string"},"name":"case_id","in":"path"},{"required":false,"schema":{"title":"Authorization","type":"string"},"name":"Authorization","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostRewardBatchBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostRewardBatchResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v3/recommendation/{case_id}":{"post":{"tags":["reco"],"summary":"Request a single recommendation list","description":"Request and return recommendations for a single customer interaction, with these parameters:\n\n- **query_id** (required, string): The unique ID of this request\n- **customer_id** (string): The unique ID of your customer\n- **state** (dictionary): A 'state vector' of your customer, used to make the goodmoves AI learn\n- **limit** (int): Limit the number of actions returned\n\nReturns:\n\n- Response dictionary, recommendations at found at key `actions`\n","operationId":"reco_recommendation_v3_recommendation__case_id__post","parameters":[{"required":true,"schema":{"title":"Case Id","type":"string"},"name":"case_id","in":"path"},{"required":false,"schema":{"title":"Authorization","type":"string"},"name":"Authorization","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostRecommendationBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostRecommendationResponse"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Action":{"title":"Action","type":"string","description":"string that identifies an action","example":"actionC"},"AllowedActions":{"title":"AllowedActions","type":"array","items":{"$ref":"#/components/schemas/Action"},"description":"Array of `action`s you want to allow","example":["actionA","actionB","actionC","actionN"]},"CurrentPage":{"title":"CurrentPage","type":"string","description":"String that specifies on which page the action request was triggered","example":"products/529385c"},"Customer":{"title":"Customer","required":["query_id"],"type":"object","properties":{"customer_id":{"$ref":"#/components/schemas/CustomerId"},"query_id":{"$ref":"#/components/schemas/QueryId"},"state":{"$ref":"#/components/schemas/CustomerState"}}},"CustomerId":{"title":"CustomerId","type":"string","description":"Unique ID that relates to a specific customer, which allows enrichment of state from additional data sources.","example":"c62wz-sr8vq-91yr7-exadpjx6ll"},"CustomerProductState":{"title":"CustomerProductState","type":"object","properties":{"page_id":{"$ref":"#/components/schemas/CurrentPage"},"search_strings":{"$ref":"#/components/schemas/SearchStringList"},"products_viewed":{"$ref":"#/components/schemas/ProductsViewed"},"products_scrolled":{"$ref":"#/components/schemas/ProductsScrolled"},"products_basket":{"$ref":"#/components/schemas/ProductsBasket"},"products_bought":{"$ref":"#/components/schemas/ProductsBought"}}},"CustomerState":{"title":"CustomerState","type":"object","properties":{}},"GetInfoResponse":{"title":"GetInfoResponse","required":["info","description","version"],"type":"object","properties":{"info":{"title":"Info","type":"string"},"description":{"title":"Description","type":"string"},"version":{"title":"Version","type":"string"}}},"GetVersionResponse":{"title":"GetVersionResponse","required":["version"],"type":"object","properties":{"version":{"title":"Version","type":"string"}}},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"PostActionBatchBody":{"title":"PostActionBatchBody","required":["customers"],"type":"object","properties":{"limit":{"title":"Limit","minimum":1.0,"type":"integer","description":"Limit for the length of the returned list of `actions`","example":3},"test_api":{"title":"Test Api","type":"boolean","description":"Flag used for code tests. Requests are not stored in database.","default":false,"example":false},"allowed_actions":{"$ref":"#/components/schemas/AllowedActions"},"customers":{"title":"Customers","type":"array","items":{"$ref":"#/components/schemas/Customer"}}}},"PostActionBatchResponse":{"title":"PostActionBatchResponse","type":"array","items":{"$ref":"#/components/schemas/PostActionResponse"}},"PostActionBody":{"title":"PostActionBody","required":["query_id","state"],"type":"object","properties":{"limit":{"title":"Limit","minimum":1.0,"type":"integer","description":"Limit for the length of the returned list of `actions`","example":3},"test_api":{"title":"Test Api","type":"boolean","description":"Flag used for code tests. Requests are not stored in database.","default":false,"example":false},"allowed_actions":{"$ref":"#/components/schemas/AllowedActions"},"customer_id":{"$ref":"#/components/schemas/CustomerId"},"query_id":{"$ref":"#/components/schemas/QueryId"},"state":{"title":"State","type":"object","description":"State of the customer","example":{"contract":"XL","age":35}}}},"PostActionResponse":{"title":"PostActionResponse","required":["actions","query_id"],"type":"object","properties":{"actions":{"$ref":"#/components/schemas/PrioritisedActions"},"query_id":{"$ref":"#/components/schemas/QueryId"}}},"PostRecommendationBody":{"title":"PostRecommendationBody","required":["query_id","state"],"type":"object","properties":{"limit":{"title":"Limit","minimum":1.0,"type":"integer","description":"Limit for the length of the returned list of `actions`","example":3},"test_api":{"title":"Test Api","type":"boolean","description":"Flag used for code tests. Requests are not stored in database.","default":false,"example":false},"customer_id":{"$ref":"#/components/schemas/CustomerId"},"query_id":{"$ref":"#/components/schemas/QueryId"},"state":{"$ref":"#/components/schemas/CustomerProductState"}}},"PostRecommendationResponse":{"title":"PostRecommendationResponse","required":["status","query_id","actions"],"type":"object","properties":{"status":{"title":"Status","type":"integer"},"query_id":{"$ref":"#/components/schemas/QueryId"},"actions":{"title":"Actions","type":"array","items":{"$ref":"#/components/schemas/Action"}}}},"PostRewardBatchBody":{"title":"PostRewardBatchBody","required":["rewards"],"type":"object","properties":{"test_api":{"title":"Test Api","type":"boolean","description":"Flag used for code tests. Requests are not stored in database.","default":false,"example":false},"rewards":{"title":"Rewards","type":"array","items":{"$ref":"#/components/schemas/Reward"}}}},"PostRewardBatchResponse":{"title":"PostRewardBatchResponse","required":["success"],"type":"object","properties":{"success":{"title":"Success","type":"boolean"}}},"PostRewardBody":{"title":"PostRewardBody","required":["query_id","reward"],"type":"object","properties":{"test_api":{"title":"Test Api","type":"boolean","description":"Flag used for code tests. Requests are not stored in database.","default":false,"example":false},"query_id":{"$ref":"#/components/schemas/QueryId"},"reward":{"title":"Reward","type":"number","example":1.337}}},"PostRewardResponse":{"title":"PostRewardResponse","required":["success"],"type":"object","properties":{"success":{"title":"Success","type":"boolean"}}},"PostSelectActionBatchBody":{"title":"PostSelectActionBatchBody","required":["selection"],"type":"object","properties":{"test_api":{"title":"Test Api","type":"boolean","description":"Flag used for code tests. Requests are not stored in database.","default":false,"example":false},"selection":{"title":"Selection","type":"array","items":{"$ref":"#/components/schemas/Selection"}}}},"PostSelectActionBatchResponse":{"title":"PostSelectActionBatchResponse","required":["success"],"type":"object","properties":{"success":{"title":"Success","type":"boolean"}}},"PostSelectActionBody":{"title":"PostSelectActionBody","required":["query_id","action"],"type":"object","properties":{"test_api":{"title":"Test Api","type":"boolean","description":"Flag used for code tests. Requests are not stored in database.","default":false,"example":false},"query_id":{"$ref":"#/components/schemas/QueryId"},"action":{"$ref":"#/components/schemas/Action"}}},"PostSelectActionResponse":{"title":"PostSelectActionResponse","required":["success"],"type":"object","properties":{"success":{"title":"Success","type":"boolean"}}},"PrioritisedActions":{"title":"PrioritisedActions","type":"array","items":{"$ref":"#/components/schemas/Action"},"description":"Actions ordered by their priority.","example":["actionB","actionA"]},"ProductSku":{"title":"ProductSku","type":"string","description":"String that uniquely identifies a product","example":"529385c"},"ProductsBasket":{"title":"ProductsBasket","type":"array","items":{"$ref":"#/components/schemas/ProductSku"},"description":"List of products that have been placed in the basket","example":["876539a","404955e","019643a"]},"ProductsBought":{"title":"ProductsBought","type":"array","items":{"$ref":"#/components/schemas/ProductSku"},"description":"List of products that have been previously bought","example":["876539a","404955e","019643a"]},"ProductsScrolled":{"title":"ProductsScrolled","type":"array","items":{"$ref":"#/components/schemas/ProductSku"},"description":"List of product pages where a scroll event occurred","example":["876539a","404955e","019643a"]},"ProductsViewed":{"title":"ProductsViewed","type":"array","items":{"$ref":"#/components/schemas/ProductSku"},"description":"List of products viewed by the customer","example":["876539a","404955e","019643a"]},"QueryId":{"title":"QueryId","type":"string","description":"Unique ID that relates to a specific NBA request","example":"af76e514-f597-e73b-fb49-d61573d2f63a"},"Reward":{"title":"Reward","required":["query_id","reward"],"type":"object","properties":{"query_id":{"$ref":"#/components/schemas/QueryId"},"reward":{"title":"Reward","type":"number","example":1.337}}},"SearchString":{"title":"SearchString","type":"string","description":"Search string entered by the end user","example":"Couch"},"SearchStringList":{"title":"SearchStringList","type":"array","items":{"$ref":"#/components/schemas/SearchString"},"description":"List of search strings entered by the end user","example":["Couch","Chair"]},"Selection":{"title":"Selection","required":["action","query_id"],"type":"object","properties":{"action":{"$ref":"#/components/schemas/Action"},"query_id":{"$ref":"#/components/schemas/QueryId"}}},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"type":"string"}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}}}},"tags":[{"name":"info","description":""},{"name":"nba","description":"### goodmoves Next-Best-Action\n\ngoodmoves can give NBAs, tailored to a customer's state. \nFirst, goodmoves gives a few optimal actions using the `/v3/action/{case_id}` endpoint. \nThen, you tell goodmoves which action you selected using the `/v3/action/{case_id}/select` endpoint. \nFinally, you tell goodmoves the reward for that action using the `/v3/reward/{case_id}` endpoint.\n"},{"name":"reco","description":"### goodmoves recommendation engine\n\ngoodmoves can provide product recommendations, tailored to the customer's state.  \nYou can create and update a product feed using resp. the `/v3/feed/{case_id}` and `/v3/feed/{case_id}/update` endpoints. \nThen, you can request product recommendations using the `/v3/recommendation/{case_id}` endpoint.\n"}]}